include _includes/sharedHTMLfunctions
doctype html
html
    head
        meta(charset='UTF-8')
        meta(name='viewport', content='width=device-width, initial-scale=1.0')
        meta(http-equiv='X-UA-Compatible', content='ie=edge')
        meta(name='description', content='Thu mua lúa gạo, thức ăn chăn nuôi giá cả hợp lý tại Quảng Trị')
        meta(name='author', content='Nguyễn Như Sơn')
        title Thu mua lúa gạo, thức ăn chăn nuôi Quảng Trị
        // Load cdn  Css Boostrap
        link(rel='stylesheet', href='/css/bootstrap.min.css')
        // Load cdn Jquery Boostrap
        script(src='/js/jquery-3.3.1.min.js')
        script(src='/js/popper.min.js')
        // Load cdn  JavaScript Boostrap
        script(src='/js/bootstrap.min.js')
        script(src='/js/fontawesome-all.min.js')
        // Load app CSS
        link(rel='stylesheet', href='/css/myCSS.css')
        // Load app JavaScript
    body
        header
            .sticky-top
                .container
                    .row.info
                        .col-xs-12.col-sm-12.col-md-2.text-center.m-auto
                            a(href="/employer")
                                span#header-logo.mx-auto.d-block
                                    img(src='/images/Logo.png', alt='Lúa gạo Quảng Trị')
                            label KHOAI TÂY
                        .col-xs-12.col-sm-12.col-md-3.format-pay.m-auto
                            .pay.m-auto
                                .icon-left
                                    i.fas.fa-calculator
                                .title-right
                                    span Thanh toán
                                    p Khi nhận hàng
                        .col-xs-12.col-sm-12.col-md-3.m-auto.text-center
                            .lie.m-auto
                                .icon-left
                                    i.fas.fa-sync-alt
                                .title-right
                                    span Đổi trả hàng
                                    p Không ưa ý
                        .col-xs-12.col-sm-12.col-md-4.m-auto
                            .purchase.m-auto
                                .icon-left
                                    i.fas.fa-phone-volume
                                .title-right
                                    span Mua hàng online
                                    p 036 7588955
        main.container
            .row
                .col-12.content

                    .container
                        .row.add-product
                            a.add(href='#', data-toggle='modal', data-target='#add') Thêm sản phẩm
                        #add.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                            .modal-dialog(role='document')
                                .modal-content
                                    .modal-header
                                        h5#exampleModalLabel.modal-title Điền thông tin sản phẩm thêm
                                        button.close(type='button', data-dismiss='modal', aria-label='Close')
                                            span(aria-hidden='true') ×
                                            // Dấu đóng cửa sổ
                                    form(action='/employer/sanpham', method='POST', enctype="multipart/form-data")
                                        .modal-body
                                            input(type='file', name='anh')
                                            input(type='text', placeholder=' Giá sản phẩm', name='donGia')
                                            input(type='text', placeholder=' Tên sản phẩm', name='tenSanPham')
                                            input(type='number', placeholder=' Số lượng sản phẩm', name='soLuong')
                                        .modal-footer
                                            button#bt.btn.btn-primary(type='submit') Hoàn tất
                    .content
                        #san-pham
                            .title-product
                                span
                                    i.fab.fa-product-hunt
                                    |  Sản Phẩm
                            .row.content-product
                                +showListSanPham2(listSanPham)
                                //- .col-6.col-md-3.product.khangdan
                                //-     .img-pro
                                //-         img(src='/images/gao-khang-dan.jpg', alt='')
                                //-     ul
                                //-         li
                                //-             span.price 35.000 đ/ 10Kg
                                //-         li
                                //-             a(href='#') Gạo khang dân lẻ
                                //-         li
                                //-             i.fas.fa-check
                                //-             p Còn hàng
                                //-             | Số lượng 20 bao
                                //-         li
                                //-             a.edit(href='#', data-toggle='modal', data-target='#edit') Sửa
                                //-             a.remove(href='#') Xóa
                                
                                #edit.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalLabel', aria-hidden='true')
                                    .modal-dialog(role='document')
                                        .modal-content
                                            .modal-header
                                                h5#exampleModalLabel.modal-title Điền thông tin sửa
                                                button.close(type='button', data-dismiss='modal', aria-label='Close')
                                                    span(aria-hidden='true') ×
                                                    // Dấu đóng cửa sổ
                                            form#edit-form(action='#', method='post', enctype="multipart/form-data")
                                                .modal-body
                                                    input(type='file', name='anh')
                                                    input(type='text', placeholder=' Giá sản phẩm',name='donGia')
                                                    input(type='text', placeholder=' Tên sản phẩm', name='tenSanPham')
                                                    input(type='number', placeholder=' Số lượng sản phẩm', name='soLuong')
                                                .modal-footer
                                                    button#bt.btn.btn-primary(type='submit') Hoàn tất
        footer.container
            .row.footer-2
                #footer-center.col-lg-12
                    span
                        | @ Copyright 2018 Xoan | Mua bán lúa gạo - Thức ăn chăn nuôi Quảng Trị 
                        a(href='https://www.facebook.com/sontocxoan.congnghe') Designed By Nguyễn Như Sơn
                        | .
        a#back-to-top.btn.btn-danger.btn-lg.back-to-top(href='#', role='button', title='Về đầu trang', data-toggle='tooltip', data-placement='left')
            span.fas.fa-angle-up
        script(src='/js/myJS.js')
        script.
            let listSP = document.querySelector("#san-pham");
            console.log(listSP);
            listSP.addEventListener("click", function (e) {
                console.log(e.target.className);
                if (e.target.className === "edit") {
                    console.log(e.target.id);

                    var listSanPham = JSON.parse('!{JSON.stringify(listSanPham)}')

                    var result = {};

                    for (let i = 0 ; i < listSanPham.length; i++) {
                        if (listSanPham[i]._id === e.target.id)
                            result = listSanPham[i];
                    }

                    console.log(result);
                    //- let donGia = result.donGia;
                    //- let soLuong = result.;
                    //- let tenSanPham;




                    let form = document.querySelector("#edit-form");
                    let input = form.childNodes[0].childNodes;


                    form.setAttribute("action", "/employer/sanpham/update/" + result._id)

                    input[1].value = result.donGia;
                    input[2].value = result.tenSanPham;
                    input[3].value = result.soLuong;

                    console.log("form:", form);
                    console.log("input:", input);
                }
            });